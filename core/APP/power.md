# 功率控制的说明，一共分为三部分

## 1.实际功率的拟合

通过最小二乘或者矩阵加上线性代数知识，去拟合实际功率的曲线，达到离线的时候，即在场上能够预测出实时的实际数据，误差做到1~2w左右就是最优

## 2.最大扭矩的计算

通过自身的拟合公式去反向求解得到允许功率下的最大扭矩，使用“求根公式”-2A分之B，得到正负两个根，需要传入PID的输出，当输出为正的时候使用正根，输出为负的时候使用负根。

## 3.单个电机功率的重分配

每个电机达到目标转速所需要的功率并不相同，，原因包括但不仅限于装配精度和电机本身的问题，但归根结底就只有4个轮向和4个舵向，我们将舵向和轮向分开两个部分，分别去重分配steer and wheel两部分功率，举个例子：比如4个wheel，花费了共100w，
假设总功率限制 MAXPower = 60W
4个电机的误差分别为：10, 20, 30, 40
总误差和 sumErr = 10+20+30+40 = 100

则功率分配：
电机1: 60 *(10/100) = 6W
电机2: 60* (20/100) = 12W  
电机3: 60 *(30/100) = 18W
电机4: 60* (40/100) = 24W
总计：6+12+18+24 = 60W
按照实际消耗功率的占比去映射允许消耗的功率，实现扭矩的分配。

### 文件中的能量环，由超电提供，测试阶段功率计（PowerMeter）也可

### 尽量使用扫频法去拟合，在你所拟合的rad下功率的误差不超过1.5w（2rad）。跟手动给值加阻尼的方法相比较扫频法的功率拟合曲线会更加稳定

### 这里附上control.cpp的代码，作为拟合采样的参考
